!function(){"use strict";var n,t,e,o,i,r=-1,a=function(n){addEventListener("pageshow",(function(t){t.persisted&&(r=t.timeStamp,n(t))}),!0)},s=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},c=function(){var n=s();return n&&n.activationStart||0},d=function(n,t){var e=s(),o="navigate";return r>=0?o="back-forward-cache":e&&(document.prerendering||c()>0?o="prerender":document.wasDiscarded?o="restore":e.type&&(o=e.type.replace(/_/g,"-"))),{name:n,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},u=function(n,t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var o=new PerformanceObserver((function(n){Promise.resolve().then((function(){t(n.getEntries())}))}));return o.observe(Object.assign({type:n,buffered:!0},e||{})),o}}catch(n){}},l=function(n,t,e,o){var i,r;return function(a){t.value>=0&&(a||o)&&((r=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=r,t.rating=function(n,t){return n>t[1]?"poor":n>t[0]?"needs-improvement":"good"}(t.value,e),n(t))}},w=function(n){requestAnimationFrame((function(){return requestAnimationFrame((function(){return n()}))}))},p=function(n){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||n(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},f=function(n){var t=!1;return function(e){t||(n(e),t=!0)}},m=-1,v=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},h=function(n){"hidden"===document.visibilityState&&m>-1&&(m="visibilitychange"===n.type?n.timeStamp:0,y())},g=function(){addEventListener("visibilitychange",h,!0),addEventListener("prerenderingchange",h,!0)},y=function(){removeEventListener("visibilitychange",h,!0),removeEventListener("prerenderingchange",h,!0)},A=function(){return m<0&&(m=v(),g(),a((function(){setTimeout((function(){m=v(),g()}),0)}))),{get firstHiddenTime(){return m}}},b=function(n){document.prerendering?addEventListener("prerenderingchange",(function(){return n()}),!0):n()},k=[1800,3e3],E=function(n,t){t=t||{},b((function(){var e,o=A(),i=d("FCP"),r=u("paint",(function(n){n.forEach((function(n){"first-contentful-paint"===n.name&&(r.disconnect(),n.startTime<o.firstHiddenTime&&(i.value=Math.max(n.startTime-c(),0),i.entries.push(n),e(!0)))}))}));r&&(e=l(n,i,k,t.reportAllChanges),a((function(o){i=d("FCP"),e=l(n,i,k,t.reportAllChanges),w((function(){i.value=performance.now()-o.timeStamp,e(!0)}))})))}))},T=[.1,.25],L={passive:!0,capture:!0},C=new Date,P=function(o,i){n||(n=i,t=o,e=new Date,I(removeEventListener),S())},S=function(){if(t>=0&&t<e-C){var i={entryType:"first-input",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+t};o.forEach((function(n){n(i)})),o=[]}},O=function(n){if(n.cancelable){var t=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,t){var e=function(){P(n,t),i()},o=function(){i()},i=function(){removeEventListener("pointerup",e,L),removeEventListener("pointercancel",o,L)};addEventListener("pointerup",e,L),addEventListener("pointercancel",o,L)}(t,n):P(t,n)}},I=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return n(t,O,L)}))},R=[100,300],x=0,F=1/0,M=0,D=function(n){n.forEach((function(n){n.interactionId&&(F=Math.min(F,n.interactionId),M=Math.max(M,n.interactionId),x=M?(M-F)/7+1:0)}))},N=function(){return i?x:performance.interactionCount||0},U=function(){"interactionCount"in performance||i||(i=u("event",D,{type:"event",buffered:!0,durationThreshold:0}))},K=[200,500],j=0,B=function(){return N()-j},W=[],H={},z=function(n){var t=W[W.length-1],e=H[n.interactionId];if(e||W.length<10||n.duration>t.latency){if(e)e.entries.push(n),e.latency=Math.max(e.latency,n.duration);else{var o={id:n.interactionId,latency:n.duration,entries:[n]};H[o.id]=o,W.push(o)}W.sort((function(n,t){return t.latency-n.latency})),W.splice(10).forEach((function(n){delete H[n.id]}))}},q=[2500,4e3],V={},$=[800,1800],G=function n(t){document.prerendering?b((function(){return n(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return n(t)}),!0):setTimeout(t,0)},J=function(n,t){t=t||{};var e=d("TTFB"),o=l(n,e,$,t.reportAllChanges);G((function(){var i=s();if(i){var r=i.responseStart;if(r<=0||r>performance.now())return;e.value=Math.max(r-c(),0),e.entries=[i],o(!0),a((function(){e=d("TTFB",0),(o=l(n,e,$,t.reportAllChanges))(!0)}))}}))};const _=n=>window.woorankAssistantOptions.debug&&console.log(n);var Q=function(e){var i=e.document,r=e.userAgent,s=e.navigator,m=e.useLambda,v=e.pubKey,h=e.woorankRootUrl,g=[],y=m?"https://fm0bfi5nrl.execute-api.us-east-1.amazonaws.com/prod/collect/"+v:new URL("/rum-collector/",h).toString(),k=function(n){var t,e={name:n.name,value:n.value,delta:n.delta,id:n.id,url:i.location.href,date:(new Date).toISOString(),userAgent:r,siteOwnerId:v,connectionType:null===(t=s.connection||s.mozConnection||s.webkitConnection)||void 0===t?void 0:t.effectiveType};_({event:"onReport",woorankReportData:e}),g.push(e)};!function(n,t){t=t||{},E(f((function(){var e,o=d("CLS",0),i=0,r=[],s=function(n){n.forEach((function(n){if(!n.hadRecentInput){var t=r[0],e=r[r.length-1];i&&n.startTime-e.startTime<1e3&&n.startTime-t.startTime<5e3?(i+=n.value,r.push(n)):(i=n.value,r=[n])}})),i>o.value&&(o.value=i,o.entries=r,e())},c=u("layout-shift",s);c&&(e=l(n,o,T,t.reportAllChanges),p((function(){s(c.takeRecords()),e(!0)})),a((function(){i=0,o=d("CLS",0),e=l(n,o,T,t.reportAllChanges),w((function(){return e()}))})),setTimeout(e,0))})))}(k),function(e,i){i=i||{},b((function(){var r,s=A(),c=d("FID"),w=function(n){n.startTime<s.firstHiddenTime&&(c.value=n.processingStart-n.startTime,c.entries.push(n),r(!0))},m=function(n){n.forEach(w)},v=u("first-input",m);r=l(e,c,R,i.reportAllChanges),v&&p(f((function(){m(v.takeRecords()),v.disconnect()}))),v&&a((function(){var a;c=d("FID"),r=l(e,c,R,i.reportAllChanges),o=[],t=-1,n=null,I(addEventListener),a=w,o.push(a),S()}))}))}(k),["a84c7a135af237554a0e38ec948269c1","136d51daa59237845e957842b9a19357"].includes(v)&&function(n,t){t=t||{},b((function(){var e;U();var o,i=d("INP"),r=function(n){n.forEach((function(n){n.interactionId&&z(n),"first-input"===n.entryType&&!W.some((function(t){return t.entries.some((function(t){return n.duration===t.duration&&n.startTime===t.startTime}))}))&&z(n)}));var t,e=(t=Math.min(W.length-1,Math.floor(B()/50)),W[t]);e&&e.latency!==i.value&&(i.value=e.latency,i.entries=e.entries,o())},s=u("event",r,{durationThreshold:null!==(e=t.durationThreshold)&&void 0!==e?e:40});o=l(n,i,K,t.reportAllChanges),s&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&s.observe({type:"first-input",buffered:!0}),p((function(){r(s.takeRecords()),i.value<0&&B()>0&&(i.value=0,i.entries=[]),o(!0)})),a((function(){W=[],j=N(),i=d("INP"),o=l(n,i,K,t.reportAllChanges)})))}))}(k),function(n,t){t=t||{},b((function(){var e,o=A(),i=d("LCP"),r=function(n){var t=n[n.length-1];t&&t.startTime<o.firstHiddenTime&&(i.value=Math.max(t.startTime-c(),0),i.entries=[t],e())},s=u("largest-contentful-paint",r);if(s){e=l(n,i,q,t.reportAllChanges);var m=f((function(){V[i.id]||(r(s.takeRecords()),s.disconnect(),V[i.id]=!0,e(!0))}));["keydown","click"].forEach((function(n){addEventListener(n,(function(){return setTimeout(m,0)}),!0)})),p(m),a((function(o){i=d("LCP"),e=l(n,i,q,t.reportAllChanges),w((function(){i.value=performance.now()-o.timeStamp,V[i.id]=!0,e(!0)}))}))}}))}(k),E(k),J(k),i.addEventListener("visibilitychange",(function(){"hidden"===i.visibilityState&&0!==g.length&&(_({event:"flushing-web-vitals",events:g}),s.sendBeacon&&s.sendBeacon(y,JSON.stringify(g)),g=[])}))};try{const n=()=>{if(document.hasStorageAccess&&"1"===new URL(window.location.href).searchParams.get("init-assistant")){window.addEventListener("message",(n=>{const t=new URL(n.origin).host;"storage-access-granted"===n.data&&["www.woorank.com","woorank.com","assistant.woorank.com"].includes(t)&&window.location.reload()}),!1);const n=document.createElement("iframe");n.src="https://assistant.woorank.com/hydra/assistant-storage.html",n.style="position: abolute; top: 0; left: 0; width: 100px; height: 100px; border: none; position:absolute;z-index:2147483647",document.body.appendChild(n)}},t=()=>{if(!window.navigator||!window.navigator.userAgent)return!0;const n=window.navigator.userAgent;return["spider","crawl","bingPreview","iphone","android","HeadlessChrome","bot"].some((t=>n.toLowerCase().includes(t.toLowerCase())))},e=()=>{if(window.woorankAssistantOptions)return window.woorankAssistantOptions;if(document.currentScript&&document.currentScript.src){const n=new URL(document.currentScript.src).searchParams;return 0===n.toString().length?{}:{url:n.get("url"),assistantPublicKey:n.get("assistantPublicKey"),collectWebVitals:!!n.get("collectWebVitals")}}return{}},o=()=>!window.woorankAssistantOptions.bypassIframe&&window.self!==window.top,i=()=>{if(!window.woorankAssistantOptions.url)return!0;const n=new URL(window.location).host.replace(/^www\./,"").toLowerCase();if("function"==typeof n.endsWith&&n.endsWith("duda.co"))return!0;return n===window.woorankAssistantOptions.url.replace(/^www\./,"").toLowerCase()};(async()=>{if(window.woorankAssistantOptions=e(),!i())return;const r=window.woorankAssistantOptions.root||"https://www.woorank.com/",a=window.woorankAssistantOptions.useLambda||!1,s=["https://www.woorank.com/","https://wwwtest.woorank.com/"].includes(r)?"https://assets.woorank.com/hydra/":r+"dev-cdn/",c=window.woorankAssistantOptions.assistantPublicKey||"na";if(Q({woorankRootUrl:r,document:document,pubKey:c,useLambda:a,navigator:navigator,userAgent:window.navigator.userAgent}),o()||t())return;const d=new URL(r+"en/onpage-assistant/check");d.searchParams.append("url",window.location.href),d.searchParams.append("projectUrl",window.woorankAssistantOptions.url),window.woorankAssistantOptions.assistantPublicKey&&d.searchParams.append("pubkey",window.woorankAssistantOptions.assistantPublicKey),window.woorankAssistantOptions.context&&"string"==typeof window.woorankAssistantOptions.context&&d.searchParams.append("context",window.woorankAssistantOptions.context),window.dmAPI&&window.dmAPI.getCurrentEnvironment&&"editor"===window.dmAPI.getCurrentEnvironment()&&d.searchParams.append("currentEnvironment","editor"),window.dmAPI&&window.dmAPI.getSiteName&&window.dmAPI.getSiteName()&&d.searchParams.append("siteName",window.dmAPI.getSiteName()),"loading"===document.readyState?window.addEventListener("load",(()=>{n()})):n();const u=await window.fetch(d,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(404!==u.status)try{const n=await u.json();n.success?(window.woorankAssistantOptions.daysInTrial=n.daysInTrial,window.woorankAssistantOptions.isInTrial=n.isInTrial,window.woorankAssistantOptions.trialEnded=n.trialEnded,document.body.appendChild(document.createElement("script")).src=`${s}assistantWidget.latest.js`):n.userNotFound&&"dudaEditor"===window.woorankAssistantOptions.context&&(window.woorankAssistantOptions.userNotFound=!0,document.body.appendChild(document.createElement("script")).src=`${s}assistantWidget.latest.js`)}catch(n){console.error("error trying to load woorank assistant user data")}})()}catch(n){console.error("Error loading woorank assistant")}}();
//# sourceMappingURL=assistantLoader.latest.js.map
